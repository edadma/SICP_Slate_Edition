\documentclass[11pt]{book}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{geometry}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{tikz}
\usepackage{enumitem}

% Geometry settings
\geometry{margin=1in, headheight=14pt}

% Code listing style for Slate
\lstdefinestyle{slate}{
    basicstyle=\ttfamily\small,
    keywordstyle=\color{blue}\bfseries,
    keywordstyle=[2]\color{purple}\bfseries,
    keywordstyle=[3]\color{teal}\bfseries,
    keywordstyle=[4]\color{orange!80!black},
    keywordstyle=[5]\color{violet}\bfseries,
    commentstyle=\color{gray}\itshape,
    stringstyle=\color{red},
    numberstyle=\tiny\color{gray},
    identifierstyle=\color{black},
    breaklines=true,
    breakatwhitespace=true,
    tabsize=4,
    showspaces=false,
    showstringspaces=false,
    frame=single,
    rulecolor=\color{black!30},
    backgroundcolor=\color{gray!5},
    keywords={def, val, var, if, then, else, elif, end, and, or, not, match, case, default, while, do, for, loop, break, continue, return, import, package},
    keywords=[2]{true, false, null, undefined, NaN, Infinity},
    keywords=[3]{print, abs, sqrt, floor, ceil, sin, cos, tan, exp, ln, max, min, type, input, random},
    literate={//}{{{\color{orange!80!black}//}}}2
             {**}{{{\color{orange!80!black}**}}}2
             {==}{{{\color{orange!80!black}==}}}2
             {!=}{{{\color{orange!80!black}!=}}}2
             {<=}{{{\color{orange!80!black}<=}}}2
             {>=}{{{\color{orange!80!black}>=}}}2
             {+=}{{{\color{orange!80!black}+=}}}2
             {-=}{{{\color{orange!80!black}-=}}}2
             {*=}{{{\color{orange!80!black}*=}}}2
             {/=}{{{\color{orange!80!black}/=}}}2
             {&&}{{{\color{orange!80!black}\&\&}}}2
             {||}{{{\color{orange!80!black}||{}}}}2,
    otherkeywords={+, -, *, /, \%, <, >, =, !},
    morekeywords=[4]{+, -, *, /, \%, <, >, =, !},
    keywords=[5]{Array, String, Buffer, Object, Date, Duration, Period}
}

% Define Slate keywords
\lstset{
    morekeywords={def, val, var, if, then, else, elif, end, and, or, not, true, false, null, undefined, match, case, default},
    morecomment=[l]{\\}
}

\lstset{style=slate}

% Define a command for inline Slate code
\newcommand{\slate}[1]{\lstinline[basicstyle=\ttfamily,mathescape=true]{#1}}

% Plain style for syntax templates (no highlighting)
\lstdefinestyle{plain}{
    basicstyle=\ttfamily\small,
    frame=single,
    rulecolor=\color{black!30},
    backgroundcolor=\color{gray!5},
    breaklines=true,
    showspaces=false,
    showstringspaces=false,
    language={},
    keywordstyle={},
    commentstyle={},
    stringstyle={},
    identifierstyle={},
    keywords={},
    mathescape=true
}

% Page style
\pagestyle{fancy}
\fancyhf{}
\fancyhead[LE,RO]{\thepage}
\fancyhead[LO]{\nouppercase{\rightmark}}
\fancyhead[RE]{\nouppercase{\leftmark}}

\title{Structure and Interpretation of Computer Programs\\
\large Slate Edition}
\author{Adapted for the Slate Programming Language}
\date{\today}

\begin{document}

\maketitle

\newpage

\vspace*{\fill}

\noindent
\textbf{Copyright Notice}

\vspace{0.5cm}

\noindent
This work is based on \textit{Structure and Interpretation of Computer Programs} (Second Edition) by Harold Abelson, Gerald Jay Sussman, and Julie Sussman, published by MIT Press. The original work is licensed under a Creative Commons Attribution-ShareAlike 4.0 International License.

\vspace{0.3cm}

\noindent
Original work: \textit{Structure and Interpretation of Computer Programs} \\
Authors: Harold Abelson, Gerald Jay Sussman, and Julie Sussman \\
Publisher: MIT Press \\
License: Creative Commons Attribution-ShareAlike 4.0 International (CC BY-SA 4.0)

\vspace{0.3cm}

\noindent
This Slate Edition adaptation is also licensed under the Creative Commons Attribution-ShareAlike 4.0 International License. You are free to share and adapt this material under the terms of this license.

\vspace{0.3cm}

\noindent
License details: \texttt{https://creativecommons.org/licenses/by-sa/4.0/}

\vspace*{\fill}

\tableofcontents

\chapter{Building Abstractions with Procedures}

% Programming in Slate introduction section
\input{sections/programming-in-slate}

% Section 1.1: The Elements of Programming
\input{sections/section-1-1}

% Section 1.2: Procedures and the Processes They Generate
\input{sections/section-1-2}

% Section 1.3: Formulating Abstractions with Higher-Order Procedures
\input{sections/section-1-3}

\end{document}